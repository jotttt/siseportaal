(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(e,l){return"pairs"==l&&"string"==typeof e?e:"object"==typeof e&&null!=e[l]?e[l]:m[l]}function h(e){return function(l){return a(l,e)}}function k(e){var l=e.state.closeBrackets,g;return l?(g=e.getModeAt(e.getCursor()),g.closeBrackets||l):null}function a(e,l){var g=k(e),d,a,m,q;if(!g||e.getOption("disableInput")||
(d=n(g,"pairs"),a=d.indexOf(l),-1==a))return b.Pass;for(var h=n(g,"triples"),B=d.charAt(a+1)==l,w=e.listSelections(),E=0==a%2,z,v,g=0;g<w.length;g++){var F=w[g],u=F.head;v=e.getRange(u,p(u.line,u.ch+1));if(E&&!F.empty())v="surround";else if(!B&&E||v!=l)if(B&&1<u.ch&&0<=h.indexOf(l)&&e.getRange(p(u.line,u.ch-2),u)==l+l&&(2>=u.ch||e.getRange(p(u.line,u.ch-3),p(u.line,u.ch-2))!=l))v="addFour";else if(B)if(!b.isWordChar(v)&&f(e,u,l))v="both";else return b.Pass;else if(E&&(e.getLine(u.line).length==u.ch||
c(v,d)||/\s/.test(v)))v="both";else return b.Pass;else v=0<=h.indexOf(l)&&e.getRange(u,p(u.line,u.ch+3))==l+l+l?"skipThree":"skip";if(z){if(z!=v)return b.Pass}else z=v}m=a%2?d.charAt(a-1):l;q=a%2?l:d.charAt(a+1);e.operation(function(){var l,g;if("skip"==z)e.execCommand("goCharRight");else if("skipThree"==z)for(g=0;3>g;g++)e.execCommand("goCharRight");else if("surround"==z){l=e.getSelections();for(g=0;g<l.length;g++)l[g]=m+l[g]+q;e.replaceSelections(l,"around");l=e.listSelections().slice();for(g=0;g<
l.length;g++){var c=l,d=g,a;a=l[g];var f=0<b.cmpPos(a.anchor,a.head);a={anchor:new p(a.anchor.line,a.anchor.ch+(f?-1:1)),head:new p(a.head.line,a.head.ch+(f?1:-1))};c[d]=a}e.setSelections(l)}else"both"==z?(e.replaceSelection(m+q,null),e.triggerElectric(m+q),e.execCommand("goCharLeft")):"addFour"==z&&(e.replaceSelection(m+m+m+m,"before"),e.execCommand("goCharRight"))})}function c(e,l){var g=l.lastIndexOf(e);return-1<g&&1==g%2}function d(e,l){var g=e.getRange(p(l.line,l.ch-1),p(l.line,l.ch+1));return 2==
g.length?g:null}function f(e,l,g){var c=e.getLine(l.line),a=e.getTokenAt(l);if(/\bstring2?\b/.test(a.type))return!1;g=new b.StringStream(c.slice(0,l.ch)+g+c.slice(l.ch),4);for(g.pos=g.start=a.start;;){if(c=e.getMode().token(g,a.state),g.pos>=l.ch+1)return/\bstring2?\b/.test(c);g.start=g.pos}}var m={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},p=b.Pos,q,g,e;b.defineOption("autoCloseBrackets",!1,function(e,l,c){c&&c!=b.Init&&(e.removeKeyMap(g),e.state.closeBrackets=null);l&&(e.state.closeBrackets=
l,e.addKeyMap(g))});q=m.pairs+"`";g={Backspace:function(e){var g=k(e),c,a,f;if(!g||e.getOption("disableInput"))return b.Pass;c=n(g,"pairs");g=e.listSelections();for(f=0;f<g.length;f++)if(!g[f].empty()||(a=d(e,g[f].head),!a||0!=c.indexOf(a)%2))return b.Pass;for(f=g.length-1;0<=f;f--)a=g[f].head,e.replaceRange("",p(a.line,a.ch-1),p(a.line,a.ch+1),"+delete")},Enter:function(e){var g=k(e),g=g&&n(g,"explode"),c,a,f;if(!g||e.getOption("disableInput"))return b.Pass;c=e.listSelections();for(a=0;a<c.length;a++)if(!c[a].empty()||
(f=d(e,c[a].head),!f||0!=g.indexOf(f)%2))return b.Pass;e.operation(function(){var g,l;e.replaceSelection("\n\n",null);e.execCommand("goCharLeft");c=e.listSelections();for(g=0;g<c.length;g++)l=c[g].head.line,e.indentLine(l,null,!0),e.indentLine(l+1,null,!0)})}};for(e=0;e<q.length;e++)g["'"+q.charAt(e)+"'"]=h(q.charAt(e))});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],b):b(CodeMirror)})(function(b){function n(f){var m,p,q,g,e,r;if(f.getOption("disableInput"))return b.Pass;m=f.listSelections();p=[];for(e=0;e<m.length;e++){if(!m[e].empty())return b.Pass;r=m[e].head;g=f.getTokenAt(r);var l=b.innerMode(f.getMode(),g.state),t=l.state;if("xml"!=l.mode.name||
!t.tagName)return b.Pass;var h=f.getOption("autoCloseTags"),n="html"==l.mode.configuration,l="object"==typeof h&&h.dontCloseTags||n&&c,n="object"==typeof h&&h.indentTags||n&&d,h=t.tagName;if(g.end>r.ch&&(h=h.slice(0,h.length-g.end+r.ch)),q=h.toLowerCase(),!h||"string"==g.type&&(g.end!=r.ch||!/[\"\']/.test(g.string.charAt(g.string.length-1))||1==g.string.length)||"tag"==g.type&&"closeTag"==t.type||g.string.indexOf("/")==g.string.length-1||l&&-1<k(l,q)||a(f,h,r,t,!0))return b.Pass;g=n&&-1<k(n,q);p[e]=
{indent:g,text:"\x3e"+(g?"\n\n":"")+"\x3c/"+h+"\x3e",newPos:g?b.Pos(r.line+1,0):b.Pos(r.line,r.ch+1)}}for(e=m.length-1;0<=e;e--)q=p[e],f.replaceRange(q.text,m[e].head,m[e].anchor,"+insert"),r=f.listSelections().slice(0),r[e]={head:q.newPos,anchor:q.newPos},f.setSelections(r),q.indent&&(f.indentLine(q.newPos.line,null,!0),f.indentLine(q.newPos.line+1,null,!0))}function h(c,d){for(var p,q=c.listSelections(),g=[],e=d?"/":"\x3c/",r=0;r<q.length;r++){if(!q[r].empty())return b.Pass;var l=q[r].head,t=c.getTokenAt(l);
p=b.innerMode(c.getMode(),t.state);var h=p.state;if(d&&("string"==t.type||"\x3c"!=t.string.charAt(0)||t.start!=l.ch-1))return b.Pass;if("xml"!=p.mode.name)if("htmlmixed"==c.getMode().name&&"javascript"==p.mode.name)p=e+"script";else if("htmlmixed"==c.getMode().name&&"css"==p.mode.name)p=e+"style";else return b.Pass;else{if(!h.context||!h.context.tagName||a(c,h.context.tagName,l,h))return b.Pass;p=e+h.context.tagName}"\x3e"!=c.getLine(l.line).charAt(t.end)&&(p+="\x3e");g[r]=p}c.replaceSelections(g);
q=c.listSelections();for(r=0;r<q.length;r++)(r==q.length-1||q[r].head.line<q[r+1].head.line)&&c.indentLine(q[r].head.line)}function k(c,a){if(c.indexOf)return c.indexOf(a);for(var d=0,b=c.length;d<b;++d)if(c[d]==a)return d;return-1}function a(c,a,d,q,g){var e,r,l;if(!b.scanForClosingTag||(e=Math.min(c.lastLine()+1,d.line+500),r=b.scanForClosingTag(c,d,null,e),!r||r.tag!=a))return!1;d=q.context;for(g=g?1:0;d&&d.tagName==a;d=d.prev)++g;d=r.to;for(r=1;r<g;r++){if(l=b.scanForClosingTag(c,d,null,e),!l||
l.tag!=a)return!1;d=l.to}return!0}b.defineOption("autoCloseTags",!1,function(c,a,d){if(d!=b.Init&&d&&c.removeKeyMap("autoCloseTags"),a)d={name:"autoCloseTags"},("object"!=typeof a||a.whenClosing)&&(d["'/'"]=function(c){return c.getOption("disableInput")?b.Pass:h(c,!0)}),("object"!=typeof a||a.whenOpening)&&(d["'\x3e'"]=function(c){return n(c)}),c.addKeyMap(d)});var c="area base br col command embed hr img input keygen link meta param source track wbr".split(" "),d="applet blockquote body button div dl fieldset form frameset h1 h2 h3 h4 h5 h6 head html iframe layer legend object ol p select table ul".split(" ");
b.commands.closeTag=function(c){return h(c)}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(c){var a,f,m,p,q,g,e,r,l,t,n;if(c.getOption("disableInput"))return b.Pass;a=c.listSelections();m=[];for(p=0;p<a.length;p++){if(q=a[p].head,g=c.getTokenAt(q),"comment"!=g.type)return b.Pass;if(e=b.innerMode(c.getMode(),g.state).mode,f){if(f!=e)return b.Pass}else f=e;if(e=null,f.blockCommentStart&&
f.blockCommentContinue){if(r=g.string.indexOf(f.blockCommentEnd),l=c.getRange(b.Pos(q.line,0),b.Pos(q.line,g.end)),-1==r||r!=g.string.length-f.blockCommentEnd.length||!(q.ch>=r))if(0==g.string.indexOf(f.blockCommentStart)){if(e=l.slice(0,g.start),!/^\s*$/.test(e))for(e="",l=0;l<g.start;++l)e+=" "}else-1!=(n=l.indexOf(f.blockCommentContinue))&&n+f.blockCommentContinue.length>g.start&&/^\s*$/.test(l.slice(0,n))&&(e=l.slice(0,n));null!=e&&(e+=f.blockCommentContinue)}if(null==e&&f.lineComment&&h(c)&&
(t=c.getLine(q.line),n=t.indexOf(f.lineComment),-1<n&&(e=t.slice(0,n),/\S/.test(e)?e=null:e+=f.lineComment+t.slice(n+f.lineComment.length).match(/^\s*/)[0])),null==e)return b.Pass;m[p]="\n"+e}c.operation(function(){for(var e=a.length-1;0<=e;e--)c.replaceRange(m[e],a[e].from(),a[e].to(),"+insert")})}function h(c){return(c=c.getOption("continueComments"))&&"object"==typeof c?!1!==c.continueLineComment:!0}for(var k=["clike","css","javascript"],a=0;a<k.length;++a)b.extendMode(k[a],{blockCommentContinue:" * "});
b.defineOption("continueComments",null,function(c,a,f){var m,p;f&&f!=b.Init&&c.removeKeyMap("continueComment");a&&(m="Enter","string"==typeof a?m=a:"object"==typeof a&&a.key&&(m=a.key),p={name:"continueComment"},p[m]=n,c.addKeyMap(p))})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(c,a,g,e){var b=c.getLineHandle(a.line),l=a.ch-1,b=0<=l&&f[b.text.charAt(l)]||f[b.text.charAt(++l)],m,n,k;return b?(m="\x3e"==b.charAt(1)?1:-1,g&&0<m!=(l==a.ch))?null:(n=c.getTokenTypeAt(d(a.line,l+1)),k=h(c,d(a.line,l+(0<m?1:0)),m,n||null,e),null==k)?null:{from:d(a.line,l),to:k&&k.pos,match:k&&
k.ch==b.charAt(0),forward:0<m}:null}function h(c,a,g,e,b){var l,m,h,n,k,A=b&&b.maxScanLineLength||1E4,D=b&&b.maxScanLines||1E3,B=[];b=b&&b.bracketRegex?b.bracketRegex:/[(){}[\]]/;for(var D=0<g?Math.min(a.line+D,c.lastLine()+1):Math.max(c.firstLine()-1,a.line-D),w=a.line;w!=D;w+=g)if((l=c.getLine(w),l)&&(m=0<g?0:l.length-1,h=0<g?l.length:-1,!(l.length>A)))for(w==a.line&&(m=a.ch-(0>g?1:0));m!=h;m+=g)if(n=l.charAt(m),b.test(n)&&(void 0===e||c.getTokenTypeAt(d(w,m+1))==e))if(k=f[n],"\x3e"==k.charAt(1)==
0<g)B.push(n);else if(B.length)B.pop();else return{pos:d(w,m),ch:n};return w-g==(0<g?c.lastLine():c.firstLine())?!1:null}function k(a,b,g){for(var e,f,l=a.state.matchBrackets.maxHighlightLineLength||1E3,m=[],h=a.listSelections(),k=0;k<h.length;k++)(e=h[k].empty()&&n(a,h[k].head,!1,g))&&a.getLine(e.from.line).length<=l&&(f=e.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",m.push(a.markText(e.from,d(e.from.line,e.from.ch+1),{className:f})),e.to&&a.getLine(e.to.line).length<=l&&m.push(a.markText(e.to,
d(e.to.line,e.to.ch+1),{className:f})));if(m.length)if(c&&a.state.focused&&a.focus(),g=function(){a.operation(function(){for(var e=0;e<m.length;e++)m[e].clear()})},b)setTimeout(g,800);else return g}function a(a){a.operation(function(){m&&(m(),m=null);m=k(a,!1,a.state.matchBrackets)})}var c=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),d=b.Pos,f={"(":")\x3e",")":"(\x3c","[":"]\x3e","]":"[\x3c","{":"}\x3e","}":"{\x3c"},m=null;b.defineOption("matchBrackets",
!1,function(c,d,g){if(g&&g!=b.Init&&c.off("cursorActivity",a),d)c.state.matchBrackets="object"==typeof d?d:{},c.on("cursorActivity",a)});b.defineExtension("matchBrackets",function(){k(this,!0)});b.defineExtension("findMatchingBracket",function(a,c,g){return n(this,a,c,g)});b.defineExtension("scanForBracket",function(a,c,g,e){return h(this,a,c,g,e)})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("../fold/xml-fold")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../fold/xml-fold"],b):b(CodeMirror)})(function(b){function n(a){a.state.tagHit&&a.state.tagHit.clear();a.state.tagOther&&a.state.tagOther.clear();a.state.tagHit=a.state.tagOther=null}function h(a){a.state.failedTagMatch=!1;a.operation(function(){var c,d,f,m,h;(n(a),a.somethingSelected())||(c=a.getCursor(),
d=a.getViewport(),d.from=Math.min(d.from,c.line),d.to=Math.max(c.line+1,d.to),f=b.findMatchingTag(a,c,d),f)&&(a.state.matchBothTags&&(m="open"==f.at?f.open:f.close,m&&(a.state.tagHit=a.markText(m.from,m.to,{className:"CodeMirror-matchingtag"}))),h="close"==f.at?f.open:f.close,h?a.state.tagOther=a.markText(h.from,h.to,{className:"CodeMirror-matchingtag"}):a.state.failedTagMatch=!0)})}function k(a){a.state.failedTagMatch&&h(a)}b.defineOption("matchTags",!1,function(a,c,d){if(d&&d!=b.Init&&(a.off("cursorActivity",
h),a.off("viewportChange",k),n(a)),c)a.state.matchBothTags="object"==typeof c&&c.bothTags,a.on("cursorActivity",h),a.on("viewportChange",k),h(a)});b.commands.toMatchingTag=function(a){var c=b.findMatchingTag(a,a.getCursor()),d;c&&(d="close"==c.at?c.open:c.close,d&&a.extendSelection(d.to,d.from))}});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.defineOption("showTrailingSpace",!1,function(n,h,k){k==b.Init&&(k=!1);k&&!h?n.removeOverlay("trailingspace"):!k&&h&&n.addOverlay({token:function(a){for(var c=a.string.length,b=c;b&&/\s/.test(a.string.charAt(b-1));--b);return b>a.pos?(a.pos=b,null):(a.pos=c,"trailingspace")},name:"trailingspace"})})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(a,d,f,m){function n(e){var b=q(a,d),f,r;if(!b||b.to.line-b.from.line<g)return null;f=a.findMarksAt(b.from);for(r=0;r<f.length;++r)if(f[r].__isFold&&"fold"!==m){if(!e)return null;b.cleared=!0;f[r].clear()}return b}var q,g,e,r;if(f&&f.call?(q=f,f=null):q=k(a,f,"rangeFinder"),"number"==typeof d&&
(d=b.Pos(d,0)),g=k(a,f,"minFoldSize"),e=n(!0),k(a,f,"scanUp"))for(;!e&&d.line>a.firstLine();)d=b.Pos(d.line-1,0),e=n(!1);e&&!e.cleared&&"unfold"!==m&&(f=h(a,f),b.on(f,"mousedown",function(e){r.clear();b.e_preventDefault(e)}),r=a.markText(e.from,e.to,{replacedWith:f,clearOnEnter:!0,__isFold:!0}),r.on("clear",function(e,g){b.signal(a,"unfold",a,e,g)}),b.signal(a,"fold",a,e.from,e.to))}function h(a,b){var f=k(a,b,"widget"),m;return"string"==typeof f&&(m=document.createTextNode(f),f=document.createElement("span"),
f.appendChild(m),f.className="CodeMirror-foldmarker"),f}function k(c,b,f){return b&&void 0!==b[f]?b[f]:(c=c.options.foldOptions)&&void 0!==c[f]?c[f]:a[f]}b.newFoldFunction=function(a,b){return function(f,m){n(f,m,{rangeFinder:a,widget:b})}};b.defineExtension("foldCode",function(a,b,f){n(this,a,b,f)});b.defineExtension("isFolded",function(a){a=this.findMarksAt(a);for(var b=0;b<a.length;++b)if(a[b].__isFold)return!0});b.commands.toggleFold=function(a){a.foldCode(a.getCursor())};b.commands.fold=function(a){a.foldCode(a.getCursor(),
null,"fold")};b.commands.unfold=function(a){a.foldCode(a.getCursor(),null,"unfold")};b.commands.foldAll=function(a){a.operation(function(){for(var d=a.firstLine(),f=a.lastLine();d<=f;d++)a.foldCode(b.Pos(d,0),null,"fold")})};b.commands.unfoldAll=function(a){a.operation(function(){for(var d=a.firstLine(),f=a.lastLine();d<=f;d++)a.foldCode(b.Pos(d,0),null,"unfold")})};b.registerHelper("fold","combine",function(){var a=Array.prototype.slice.call(arguments,0);return function(b,f){for(var m,h=0;h<a.length;++h)if(m=
a[h](b,f),m)return m}});b.registerHelper("fold","auto",function(a,b){for(var f,m=a.getHelpers(b,"fold"),h=0;h<m.length;h++)if(f=m[h](a,b),f)return f});var a={rangeFinder:b.fold.auto,widget:"â†”",minFoldSize:0,scanUp:!1};b.defineOption("foldOptions",null);b.defineExtension("foldOption",function(a,b){return k(this,a,b)})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./foldcode")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./foldcode"],b):b(CodeMirror)})(function(b){function n(a){this.options=a;this.from=this.to=0}function h(a,e){for(var b=a.findMarksAt(q(e)),l=0;l<b.length;++l)if(b[l].__isFold&&b[l].find().from.line==e)return b[l]}function k(a){if("string"==typeof a){var e=document.createElement("div");return e.className=a+" CodeMirror-guttermarker-subtle",
e}return a.cloneNode(!0)}function a(a,e,b){var l=a.state.foldGutter.options,c=e,f=a.foldOption(l,"minFoldSize"),d=a.foldOption(l,"rangeFinder");a.eachLine(e,b,function(e){var b=null,m,r;h(a,c)?b=k(l.indicatorFolded):(m=q(c,0),r=d&&d(a,m),r&&r.to.line-r.from.line>=f&&(b=k(l.indicatorOpen)));a.setGutterMarker(e,l.gutter,b);++c})}function c(b){var e=b.getViewport(),c=b.state.foldGutter;c&&(b.operation(function(){a(b,e.from,e.to)}),c.from=e.from,c.to=e.to)}function d(a,e,b){var c=a.state.foldGutter,f,
d;c&&(f=c.options,b==f.gutter)&&(d=h(a,e),d?d.clear():a.foldCode(q(e,0),f.rangeFinder))}function f(a){var e=a.state.foldGutter,b;e&&(b=e.options,e.from=e.to=0,clearTimeout(e.changeUpdate),e.changeUpdate=setTimeout(function(){c(a)},b.foldOnChangeTimeSpan||600))}function m(b){var e=b.state.foldGutter,f;e&&(f=e.options,clearTimeout(e.changeUpdate),e.changeUpdate=setTimeout(function(){var l=b.getViewport();e.from==e.to||20<l.from-e.to||20<e.from-l.to?c(b):b.operation(function(){l.from<e.from&&(a(b,l.from,
e.from),e.from=l.from);l.to>e.to&&(a(b,e.to,l.to),e.to=l.to)})},f.updateViewportTimeSpan||400))}function p(b,e){var c=b.state.foldGutter,l;c&&(l=e.line,l>=c.from&&l<c.to&&a(b,l,l+1))}b.defineOption("foldGutter",!1,function(a,e,h){if(h&&h!=b.Init&&(a.clearGutter(a.state.foldGutter.options.gutter),a.state.foldGutter=null,a.off("gutterClick",d),a.off("change",f),a.off("viewportChange",m),a.off("fold",p),a.off("unfold",p),a.off("swapDoc",f)),e){h=a.state;var l=e;e=(!0===l&&(l={}),null==l.gutter&&(l.gutter=
"CodeMirror-foldgutter"),null==l.indicatorOpen&&(l.indicatorOpen="CodeMirror-foldgutter-open"),null==l.indicatorFolded&&(l.indicatorFolded="CodeMirror-foldgutter-folded"),l);h.foldGutter=new n(e);c(a);a.on("gutterClick",d);a.on("change",f);a.on("viewportChange",m);a.on("fold",p);a.on("unfold",p);a.on("swapDoc",f)}});var q=b.Pos});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerHelper("fold","brace",function(n,h){function k(e){for(var l,g=h.ch,f=0;;)if(l=0>=g?-1:c.lastIndexOf(e,g-1),-1==l){if(1==f)break;f=1;g=c.length}else{if(1==f&&l<h.ch)break;if(d=n.getTokenTypeAt(b.Pos(a,l+1)),!/^(comment|string)/.test(d))return l+1;g=l-1}}var a=h.line,c=n.getLine(a),d,f="{",m="}",
p=k("{"),q,g,e,r,l,t,x,C,y;if(null==p&&(f="[",m="]",p=k("[")),null!=p){q=1;g=n.lastLine();l=a;a:for(;l<=g;++l)for(t=n.getLine(l),x=l==a?p:0;C=t.indexOf(f,x),y=t.indexOf(m,x),0>C&&(C=t.length),0>y&&(y=t.length),x=Math.min(C,y),x!=t.length;){if(n.getTokenTypeAt(b.Pos(l,x+1))==d)if(x==C)++q;else if(!--q){e=l;r=x;break a}++x}if(null!=e&&(a!=e||r!=p))return{from:b.Pos(a,p),to:b.Pos(e,r)}}});b.registerHelper("fold","import",function(n,h){function k(a){var c,d,h,g;if(a<n.firstLine()||a>n.lastLine()||(c=
n.getTokenAt(b.Pos(a,1)),/\S/.test(c.string)||(c=n.getTokenAt(b.Pos(a,c.end+1))),"keyword"!=c.type||"import"!=c.string))return null;d=a;for(a=Math.min(n.lastLine(),a+10);d<=a;++d)if(h=n.getLine(d),g=h.indexOf(";"),-1!=g)return{startCh:c.end,end:b.Pos(d,g)}}h=h.line;var a=k(h),c,d;if(!a||k(h-1)||(c=k(h-2))&&c.end.line==h-1)return null;for(c=a.end;d=k(c.line+1),null!=d;)c=d.end;return{from:n.clipPos(b.Pos(h,a.startCh+1)),to:c}});b.registerHelper("fold","include",function(n,h){function k(a){if(a<n.firstLine()||
a>n.lastLine())return null;var c=n.getTokenAt(b.Pos(a,1));return/\S/.test(c.string)||(c=n.getTokenAt(b.Pos(a,c.end+1))),"meta"==c.type&&"#include"==c.string.slice(0,8)?c.start+8:void 0}h=h.line;var a=k(h),c,d;if(null==a||null!=k(h-1))return null;for(c=h;d=k(c+1),null!=d;)++c;return{from:b.Pos(h,a+1),to:n.clipPos(b.Pos(c))}})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerGlobalHelper("fold","comment",function(b){return b.blockCommentStart&&b.blockCommentEnd},function(n,h){var k=n.getModeAt(h),a=k.blockCommentStart,k=k.blockCommentEnd,c,d,f,m,p,q,g,e,r,l,t;if(a&&k){c=h.line;d=n.getLine(c);m=h.ch;for(p=0;;)if(f=0>=m?-1:d.lastIndexOf(a,m-1),-1==f){if(1==p)return;
p=1;m=d.length}else{if(1==p&&f<h.ch)return;if(/comment/.test(n.getTokenTypeAt(b.Pos(c,f+1)))&&(d.slice(f-k.length,f)==k||!/comment/.test(n.getTokenTypeAt(b.Pos(c,f))))){f+=a.length;break}m=f-1}d=1;m=n.lastLine();p=c;a:for(;p<=m;++p)for(e=n.getLine(p),r=p==c?f:0;l=e.indexOf(a,r),t=e.indexOf(k,r),0>l&&(l=e.length),0>t&&(t=e.length),r=Math.min(l,t),r!=e.length;){if(r==l)++d;else if(!--d){q=p;g=r;break a}++r}if(null!=q&&(c!=q||g!=f))return{from:b.Pos(c,f),to:b.Pos(q,g)}}})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerHelper("fold","indent",function(n,h){var k=n.getOption("tabSize"),a=n.getLine(h.line),c,d,f,m;if(/\S/.test(a)){var p=b.countColumn(a,null,k),q=null;c=h.line+1;for(d=n.lastLine();c<=d;++c)if(f=n.getLine(c),m=b.countColumn(f,null,k),m>p)q=c;else if(/\S/.test(f))break;if(q)return{from:b.Pos(h.line,
a.length),to:b.Pos(q,n.getLine(q).length)}}})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(a,b,c,g){this.line=b;this.ch=c;this.cm=a;this.text=a.getLine(b);this.min=g?g.from:a.firstLine();this.max=g?g.to-1:a.lastLine()}function h(a,b){var c=a.cm.getTokenTypeAt(q(a.line,b));return c&&/\btag\b/.test(c)}function k(a){if(!(a.line>=a.max))return a.ch=0,a.text=a.cm.getLine(++a.line),!0}
function a(a){if(!(a.line<=a.min))return a.text=a.cm.getLine(--a.line),a.ch=a.text.length,!0}function c(a){for(var b,c,g;;){if(b=a.text.indexOf("\x3e",a.ch),-1==b)if(k(a))continue;else break;if(h(a,b+1))return c=a.text.lastIndexOf("/",b),g=-1<c&&!/\S/.test(a.text.slice(c+1,b)),a.ch=b+1,g?"selfClose":"regular";a.ch=b+1}}function d(e){for(var b,c;;){if(b=e.ch?e.text.lastIndexOf("\x3c",e.ch-1):-1,-1==b)if(a(e))continue;else break;if(!h(e,b+1))e.ch=b;else if(g.lastIndex=b,e.ch=b,c=g.exec(e.text),c&&c.index==
b)return c}}function f(a){for(;;){g.lastIndex=a.ch;var b=g.exec(a.text);if(!b)if(k(a))continue;else break;if(h(a,b.index+1))return a.ch=b.index+b[0].length,b;a.ch=b.index+1}}function m(a,b){for(var g=[],d;;){var h=f(a),m,n=a.line,k=a.ch-(h?h[0].length:0);if(!h||!(m=c(a)))break;if("selfClose"!=m)if(h[1]){for(d=g.length-1;0<=d;--d)if(g[d]==h[2]){g.length=d;break}if(0>d&&(!b||b==h[2]))return{tag:h[2],from:q(n,k),to:q(a.line,a.ch)}}else g.push(h[2])}}function p(b,c){for(var g=[],f,m;;){var n;a:{n=b;for(var k=
void 0,p=m=void 0;;){if(k=n.ch?n.text.lastIndexOf("\x3e",n.ch-1):-1,-1==k)if(a(n))continue;else{n=void 0;break a}if(h(n,k+1)){n=(m=n.text.lastIndexOf("/",k),p=-1<m&&!/\S/.test(n.text.slice(m+1,k)),n.ch=k+1,p?"selfClose":"regular");break a}else n.ch=k}}if(f=n,!f)break;if("selfClose"==f)d(b);else{p=b.line;n=b.ch;k=d(b);if(!k)break;if(k[1])g.push(k[2]);else{for(m=g.length-1;0<=m;--m)if(g[m]==k[2]){g.length=m;break}if(0>m&&(!c||c==k[2]))return{tag:k[2],from:q(b.line,b.ch),to:q(p,n)}}}}}var q=b.Pos,g=
RegExp("\x3c(/?)([A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*)","g");b.registerHelper("fold","xml",function(a,b){for(var g=new n(a,b.line,0),d,h,k;d=f(g),
d&&g.line==b.line&&(h=c(g));)if(!d[1]&&"selfClose"!=h)return b=q(g.line,g.ch),k=m(g,d[2]),k&&{from:b,to:k.from}});b.findMatchingTag=function(a,b,g){var f=new n(a,b.line,b.ch,g),h;if(-1!=f.text.indexOf("\x3e")||-1!=f.text.indexOf("\x3c")){var k=c(f),y=k&&q(f.line,f.ch),A=k&&d(f);if(k&&A&&!(0<(f.line-b.line||f.ch-b.ch)))return(h={from:q(f.line,f.ch),to:y,tag:A[2]},"selfClose"==k)?{open:h,close:null,at:"open"}:A[1]?{open:p(f,A[2]),close:h,at:"close"}:(f=new n(a,y.line,y.ch,g),{open:h,close:m(f,A[2]),
at:"open"})}};b.findEnclosingTag=function(a,b,c){for(var g=new n(a,b.line,b.ch,c),d,f,h;d=p(g),d;)if(f=new n(a,b.line,b.ch,c),h=m(f,d.tag),h)return{open:d,close:h}};b.scanForClosingTag=function(a,b,c,g){a=new n(a,b.line,b.ch,g?{from:0,to:g}:null);return m(a,c)}});
(function(){CodeMirror.defineExtension("autoFormatAll",function(b,n){for(var h,k=this,a=k.getMode(),c=k.getRange(b,n).split("\n"),d=CodeMirror.copyState(a,k.getTokenAt(b).state),f=k.getOption("tabSize"),m="",p=0,q=0==b.ch,g=0;g<c.length;++g){for(h=new CodeMirror.StringStream(c[g],f);!h.eol();){var e=CodeMirror.innerMode(a,d),r=a.token(h,d),l=h.current();h.start=h.pos;(!q||/\S/.test(l))&&(m+=l,q=!1);!q&&e.mode.newlineAfterToken&&e.mode.newlineAfterToken(r,l,h.string.slice(h.pos)||c[g+1]||"",e.state)&&
(m+="\n",q=!0,++p)}!h.pos&&a.blankLine&&a.blankLine(d);!q&&g<c.length-1&&(m+="\n",q=!0,++p)}k.operation(function(){k.replaceRange(m,b,n);for(var a=b.line+1,c=b.line+p;a<=c;++a)k.indentLine(a,"smart");k.setCursor({line:0,ch:0})})})})();
(function(){function b(b){for(var h,k,a=[/for\s*?\((.*?)\)/g,/&#?[a-z0-9]+;[\s\S]/g,/\"(.*?)((\")|$)/g,/\/\*(.*?)(\*\/|$)/g,/^\/\/.*/g],c=[],d=0;d<a.length;d++)for(h=0;h<b.length;)if(k=b.substr(h).match(a[d]),null!=k)c.push({start:h+k.index,end:h+k.index+k[0].length}),h+=k.index+Math.max(1,k[0].length);else break;return c.sort(function(a,b){return a.start-b.start}),c}CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(b,h){return/^[;{}]$/.test(h)}});CodeMirror.extendMode("javascript",
{commentStart:"/*",commentEnd:"*/",wordWrapChars:[";","\\{","\\}"],autoFormatLineBreaks:function(n){var h=0,k=this.jsonMode?function(a){return a.replace(/([,{])/g,"$1\n").replace(/}/g,"\n}")}:function(a){return a.replace(/(;|\{|\})([^\r\n;])/g,"$1\n$2")},a=b(n),c="",d;if(null!=a){for(d=0;d<a.length;d++)a[d].start>h&&(c+=k(n.substring(h,a[d].start)),h=a[d].start),a[d].start<=h&&a[d].end>=h&&(c+=n.substring(h,a[d].end),h=a[d].end);h<n.length&&(c+=k(n.substr(h)))}else c=k(n);return c.replace(/^\n*|\n*$/,
"")}});CodeMirror.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",noBreak:!1,noBreakEmpty:null,tagType:"",tagName:"",isXML:!1,newlineAfterToken:function(b,h,k){var a=!1,c=null,d="",f;if(this.isXML="xml"==this.configuration?!0:!1,"comment"==b||/\x3c!--/.test(k))return!1;if("tag"==b){if(0==h.indexOf("\x3c")&&0==!h.indexOf("\x3c/")&&(this.tagType="open",c=h.match(/^<\s*?([\w]+?)$/i),this.tagName=null!=c?c[1]:"",d=this.tagName.toLowerCase(),-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+
d+"|")&&(this.noBreak=!0)),0==h.indexOf("\x3e")&&"open"==this.tagType)return(this.tagType="",f=this.isXML?"[^\x3c]*?":"",RegExp("^"+f+"\x3c/s*?"+this.tagName+"s*?\x3e","i").test(k))?(this.noBreak=!1,this.isXML||(this.tagName=""),!1):(a=this.noBreak,this.noBreak=!1,a?!1:!0);if(0==h.indexOf("\x3c/")&&(this.tagType="close",c=h.match(/^<\/\s*?([\w]+?)$/i),null!=c&&(d=c[1].toLowerCase()),-1!="|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+d+"|")&&
(this.noBreak=!0)),0==h.indexOf("\x3e")&&"close"==this.tagType)return(this.tagType="",0==k.indexOf("\x3c")&&(c=k.match(/^<\/?\s*?([\w]+?)(\s|>)/i),d=null!=c?c[1].toLowerCase():"",-1=="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+d+"|")))?(this.noBreak=!1,!0):(a=this.noBreak,this.noBreak=!1,a?!1:!0)}return 0==k.indexOf("\x3c")?(this.noBreak=!1,this.isXML&&""!=this.tagName)?(this.tagName="",!1):(c=k.match(/^<\/?\s*?([\w]+?)(\s|>)/i),
d=null!=c?c[1].toLowerCase():"",-1!="|label|li|option|textarea|title|a|b|bdi|bdo|big|center|cite|del|em|font|i|img|ins|s|small|span|strike|strong|sub|sup|u|".indexOf("|"+d+"|")?!1:!0):!1}});CodeMirror.defineExtension("commentRange",function(b,h,k){var a=this,c=CodeMirror.innerMode(a.getMode(),a.getTokenAt(h).state).mode;a.operation(function(){if(b)a.replaceRange(c.commentEnd,k),a.replaceRange(c.commentStart,h),h.line==k.line&&h.ch==k.ch&&a.setCursor(h.line,h.ch+c.commentStart.length);else{var d=a.getRange(h,
k),f=d.indexOf(c.commentStart),m=d.lastIndexOf(c.commentEnd);-1<f&&-1<m&&m>f&&(d=d.substr(0,f)+d.substring(f+c.commentStart.length,m)+d.substr(m+c.commentEnd.length));a.replaceRange(d,h,k)}})});CodeMirror.defineExtension("autoIndentRange",function(b,h){var k=this;this.operation(function(){for(var a=b.line;a<=h.line;a++)k.indentLine(a,"smart")})});CodeMirror.defineExtension("autoFormatRange",function(b,h){for(var k,a=this,c=a.getMode(),d=a.getRange(b,h).split("\n"),f=CodeMirror.copyState(c,a.getTokenAt(b).state),
m=a.getOption("tabSize"),p="",q=0,g=0==b.ch,e=0;e<d.length;++e){for(k=new CodeMirror.StringStream(d[e],m);!k.eol();){var r=CodeMirror.innerMode(c,f),l=c.token(k,f),t=k.current();k.start=k.pos;(!g||/\S/.test(t))&&(p+=t,g=!1);!g&&r.mode.newlineAfterToken&&r.mode.newlineAfterToken(l,t,k.string.slice(k.pos)||d[e+1]||"",r.state)&&(p+="\n",g=!0,++q)}!k.pos&&c.blankLine&&c.blankLine(f);!g&&e<d.length-1&&(p+="\n",g=!0,++q)}a.operation(function(){a.replaceRange(p,b,h);for(var c=b.line+1,e=b.line+q;c<=e;++c)a.indentLine(c,
"smart");a.setSelection(b,a.getCursor(!1))})})})();
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(a){for(var b=0;b<a.state.activeLines.length;b++)a.removeLineClass(a.state.activeLines[b],"wrap",c),a.removeLineClass(a.state.activeLines[b],"background",d),a.removeLineClass(a.state.activeLines[b],"gutter",f)}function h(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=
b[c])return!1;return!0}function k(a,b){for(var k,g,e=[],r=0;r<b.length;r++)(k=b[r],k.empty())&&(g=a.getLineHandleVisualStart(k.head.line),e[e.length-1]!=g&&e.push(g));h(a.state.activeLines,e)||a.operation(function(){n(a);for(var b=0;b<e.length;b++)a.addLineClass(e[b],"wrap",c),a.addLineClass(e[b],"background",d),a.addLineClass(e[b],"gutter",f);a.state.activeLines=e})}function a(a,b){k(a,b.ranges)}var c="CodeMirror-activeline",d="CodeMirror-activeline-background",f="CodeMirror-activeline-gutter";b.defineOption("styleActiveLine",
!1,function(c,d,f){f=f&&f!=b.Init;d&&!f?(c.state.activeLines=[],k(c,c.listSelections()),c.on("beforeSelectionChange",a)):!d&&f&&(c.off("beforeSelectionChange",a),n(c),delete c.state.activeLines)})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],b):b(CodeMirror)})(function(b){function n(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken,this.delay=a.delay,this.wordsOnly=a.wordsOnly,this.annotateScrollbar=a.annotateScrollbar);null==this.style&&(this.style=m);null==this.minChars&&
(this.minChars=f);null==this.delay&&(this.delay=p);null==this.wordsOnly&&(this.wordsOnly=q);this.matchesonscroll=this.overlay=this.timeout=null}function h(a){var b=a.state.matchHighlighter;clearTimeout(b.timeout);b.timeout=setTimeout(function(){c(a)},b.delay)}function k(a,b,c,f){var h=a.state.matchHighlighter,k;a.addOverlay(h.overlay=d(b,c,f));h.annotateScrollbar&&(k=c?new RegExp("\\b"+b+"\\b"):b,h.matchesonscroll=a.showMatchesOnScrollbar(k,!0,{className:"CodeMirror-selection-highlight-scrollbar"}))}
function a(a){var b=a.state.matchHighlighter;b.overlay&&(a.removeOverlay(b.overlay),b.overlay=null,b.annotateScrollbar&&(b.matchesonscroll.clear(),b.matchesonscroll=null))}function c(b){b.operation(function(){var c=b.state.matchHighlighter,d,f,h;if(a(b),!b.somethingSelected()&&c.showToken){d=!0===c.showToken?/[\w$]/:c.showToken;h=b.getCursor();f=b.getLine(h.line);for(var m=h=h.ch;h&&d.test(f.charAt(h-1));)--h;for(;m<f.length&&d.test(f.charAt(m));)++m;h<m&&k(b,f.slice(h,m),d,c.style)}else{var n;if((n=
(d=b.getCursor("from"),f=b.getCursor("to"),d.line==f.line))&&!(n=!c.wordsOnly)){var p;n=null!==b.getRange(d,f).match(/^\w+$/)?0<d.ch&&(m={line:d.line,ch:d.ch-1},p=b.getRange(m,d),null===p.match(/\W/))?!1:f.ch<b.getLine(d.line).length&&(m={line:f.line,ch:f.ch+1},p=b.getRange(f,m),null===p.match(/\W/))?!1:!0:!1}n&&(h=b.getRange(d,f).replace(/^\s+|\s+$/g,""),h.length>=c.minChars&&k(b,h,!1,c.style))}})}function d(a,b,c){return{token:function(d){var f;if(f=d.match(a))(f=!b)||(f=(!d.start||!b.test(d.string.charAt(d.start-
1)))&&(d.pos==d.string.length||!b.test(d.string.charAt(d.pos))));if(f)return c;d.next();d.skipTo(a.charAt(0))||d.skipToEnd()}}}var f=2,m="matchhighlight",p=100,q=!1;b.defineOption("highlightSelectionMatches",!1,function(d,e,f){if(f&&f!=b.Init&&(a(d),clearTimeout(d.state.matchHighlighter.timeout),d.state.matchHighlighter=null,d.off("cursorActivity",h)),e)d.state.matchHighlighter=new n(e),c(d),d.on("cursorActivity",h)})});
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.multiplexingMode=function(n){function h(a,b,d,f){var h,k;return"string"==typeof b?(h=a.indexOf(b,d),f&&-1<h?h+b.length:h):(k=b.exec(d?a.slice(d):a),k?k.index+d+(f?k[0].length:0):-1)}var k=Array.prototype.slice.call(arguments,1);return{startState:function(){return{outer:b.startState(n),innerActive:null,
inner:null}},copyState:function(a){return{outer:b.copyState(n,a.outer),innerActive:a.innerActive,inner:a.innerActive&&b.copyState(a.innerActive.mode,a.inner)}},token:function(a,c){var d,f,m,p,q,g;if(c.innerActive)return(d=c.innerActive,q=a.string,!d.close&&a.sol())?(c.innerActive=c.inner=null,this.token(a,c)):(g=d.close?h(q,d.close,a.pos,d.parseDelimiters):-1,g!=a.pos||d.parseDelimiters)?(-1<g&&(a.string=q.slice(0,g)),f=d.mode.token(a,c.inner),-1<g&&(a.string=q),g==a.pos&&d.parseDelimiters&&(c.innerActive=
c.inner=null),d.innerStyle&&(f=f?f+" "+d.innerStyle:d.innerStyle),f):(a.match(d.close),c.innerActive=c.inner=null,d.delimStyle&&d.delimStyle+" "+d.delimStyle+"-close");d=Infinity;q=a.string;for(f=0;f<k.length;++f){if(m=k[f],g=h(q,m.open,a.pos),g==a.pos)return m.parseDelimiters||a.match(m.open),c.innerActive=m,c.inner=b.startState(m.mode,n.indent?n.indent(c.outer,""):0),m.delimStyle&&m.delimStyle+" "+m.delimStyle+"-open";-1!=g&&g<d&&(d=g)}return Infinity!=d&&(a.string=q.slice(0,d)),p=n.token(a,c.outer),
Infinity!=d&&(a.string=q),p},indent:function(a,c){var d=a.innerActive?a.innerActive.mode:n;return d.indent?d.indent(a.innerActive?a.inner:a.outer,c):b.Pass},blankLine:function(a){var c=a.innerActive?a.innerActive.mode:n,d,f;if(c.blankLine&&c.blankLine(a.innerActive?a.inner:a.outer),a.innerActive)"\n"===a.innerActive.close&&(a.innerActive=a.inner=null);else for(d=0;d<k.length;++d)f=k[d],"\n"===f.open&&(a.innerActive=f,a.inner=b.startState(f.mode,c.indent?c.indent(a.outer,""):0))},electricChars:n.electricChars,
innerMode:function(a){return a.inner?{state:a.inner,mode:a.innerActive.mode}:{state:a.outer,mode:n}}}}});
